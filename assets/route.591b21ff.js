import"./modulepreload-polyfill.c7c6310f.js";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */const s=new URLSearchParams(window.location.search),l=s.get("fname"),u=s.get("car_id");console.log("fname: "+l);console.log("carID : "+u);function h(t){return fetch(t).then(e=>{if(!e.ok)throw new Error(`JSON \uC77D\uAE30 \uC624\uB958: ${e.status} ${e.statusText}`);return e.json()}).then(e=>{const o=[];return e.forEach(n=>{const{CAR_NUM:a,Y:i,X:m}=n;if(a!=u)return;const c=parseFloat(i),r=parseFloat(m);if(!isNaN(c)&&!isNaN(r)){const p={latitude:c,longitude:r};o.push(p)}}),o})}const f="/singpost-route/data/input-data/"+l;var d;h(f).then(t=>{d=t,g()}).catch(t=>{console.error("JSON \uC77D\uAE30 \uC624\uB958:",t)});function w(t,e,o){const n=[];t.slice(1,t.length-1).forEach(a=>{const i={location:new google.maps.LatLng(a.latitude,a.longitude)};n.push(i)}),console.log(t),console.log("latitude: "+t[0]),e.route({origin:{lat:t[0].latitude,lng:t[0].longitude},destination:{lat:t[t.length-1].latitude,lng:t[t.length-1].longitude},waypoints:n,travelMode:google.maps.TravelMode.DRIVING,avoidTolls:!0}).then(a=>{o.setDirections(a)}).catch(a=>{alert("Could not display directions due to: "+a)})}function y(t){let e=0;const o=t.routes[0];if(!!o){for(let n=0;n<o.legs.length;n++)e+=o.legs[n].distance.value;e=e/1e3,document.getElementById("total").innerHTML=e+" km"}}function g(){const t=new google.maps.Map(document.getElementById("map"),{zoom:4}),e=new google.maps.DirectionsService,o=new google.maps.DirectionsRenderer({draggable:!1,map:t,panel:document.getElementById("panel")});o.addListener("directions_changed",()=>{const n=o.getDirections();n&&y(n)}),w(d,e,o)}window.initMap=g;
