import"./modulepreload-polyfill.c7c6310f.js";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */const l=new URLSearchParams(window.location.search),u=l.get("fname")+".json",d=l.get("car_id");console.log("fname: "+u);console.log("carID : "+d);function h(e){return fetch(e).then(t=>{if(!t.ok)throw new Error(`JSON \uC77D\uAE30 \uC624\uB958: ${t.status} ${t.statusText}`);return t.json()}).then(t=>{const o=[];return t.result.forEach(n=>{const{CAR_NUM:i,Y:r,X:a}=n;if(i!=d)return;const c=parseFloat(r),s=parseFloat(a);if(!isNaN(c)&&!isNaN(s)){const p={latitude:c,longitude:s};o.push(p)}}),o})}const f="/singpost-route/data/input-data/"+u;var g;h(f).then(e=>{g=e,m()}).catch(e=>{console.error("JSON \uC77D\uAE30 \uC624\uB958:",e)});function w(e,t,o,n){const i=[];e.slice(1,e.length-1).forEach(a=>{const c={location:new google.maps.LatLng(a.latitude,a.longitude)};i.push(c)}),console.log(e),console.log("latitude: "+e[0]),t.route({origin:{lat:e[0].latitude,lng:e[0].longitude},destination:{lat:e[e.length-1].latitude,lng:e[e.length-1].longitude},waypoints:i,travelMode:google.maps.TravelMode.DRIVING,avoidTolls:!0}).then(a=>{o.setDirections(a)}).catch(a=>{alert("Could not display directions due to: "+a)});const r=new google.maps.Marker({position:{lat:e[0].latitude,lng:e[0].longitude},map:n});D(r,"blue")}function y(e){let t=0;const o=e.routes[0];if(!!o){for(let n=0;n<o.legs.length;n++)t+=o.legs[n].distance.value;t=t/1e3,document.getElementById("total").innerHTML=t+" km"}}function D(e,t){e.setIcon({url:`http://maps.google.com/mapfiles/ms/icons/${t}-dot.png`,scaledSize:new google.maps.Size(32,32)})}function m(){const e=new google.maps.Map(document.getElementById("map"),{zoom:4}),t=new google.maps.DirectionsService,o=new google.maps.DirectionsRenderer({draggable:!1,map:e,panel:document.getElementById("panel")});o.addListener("directions_changed",()=>{const n=o.getDirections();n&&y(n)}),w(g,t,o,e)}window.initMap=m;
